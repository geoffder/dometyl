<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Plate (dometyl.Dometyl.Plate)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">dometyl</a> &#x00BB; <a href="../index.html">Dometyl</a> &#x00BB; Plate</nav><header class="odoc-preamble"><h1>Module <code><span>Dometyl.Plate</span></code></h1><p>Switch plate generation.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Lookups"><a href="#module-Lookups" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Lookups/index.html">Lookups</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Provides per-column lookup functions to be used by <a href="#val-make"><code>make</code></a> for placement of <a href="../Key/index.html#type-t"><code>Key.t</code></a>s to form <a href="../Column/index.html#type-t"><code>Column.t</code></a>s, and for arrangment and orientation of the generated columns to form the plate.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-config"><a href="#type-config" class="anchor"></a><code><span><span class="keyword">type</span> config</span><span> = </span><span>{</span></code><ol><li id="type-config.n_body_rows" class="def record field anchored"><a href="#type-config.n_body_rows" class="anchor"></a><code><span>n_body_rows : <span>int <span class="arrow">&#45;&gt;</span></span> int;</span></code></li><li id="type-config.body_centres" class="def record field anchored"><a href="#type-config.body_centres" class="anchor"></a><code><span>body_centres : <span>int <span class="arrow">&#45;&gt;</span></span> float;</span></code></li><li id="type-config.n_body_cols" class="def record field anchored"><a href="#type-config.n_body_cols" class="anchor"></a><code><span>n_body_cols : int;</span></code></li><li id="type-config.centre_col" class="def record field anchored"><a href="#type-config.centre_col" class="anchor"></a><code><span>centre_col : int;</span></code></li><li id="type-config.spacing" class="def record field anchored"><a href="#type-config.spacing" class="anchor"></a><code><span>spacing : float;</span></code></li><li id="type-config.tent" class="def record field anchored"><a href="#type-config.tent" class="anchor"></a><code><span>tent : float;</span></code></li><li id="type-config.n_thumb_rows" class="def record field anchored"><a href="#type-config.n_thumb_rows" class="anchor"></a><code><span>n_thumb_rows : <span>int <span class="arrow">&#45;&gt;</span></span> int;</span></code></li><li id="type-config.thumb_centres" class="def record field anchored"><a href="#type-config.thumb_centres" class="anchor"></a><code><span>thumb_centres : <span>int <span class="arrow">&#45;&gt;</span></span> float;</span></code></li><li id="type-config.n_thumb_cols" class="def record field anchored"><a href="#type-config.n_thumb_cols" class="anchor"></a><code><span>n_thumb_cols : int;</span></code></li><li id="type-config.thumb_offset" class="def record field anchored"><a href="#type-config.thumb_offset" class="anchor"></a><code><span>thumb_offset : <span class="xref-unresolved">OCADml</span>.V3.t;</span></code></li><li id="type-config.thumb_angle" class="def record field anchored"><a href="#type-config.thumb_angle" class="anchor"></a><code><span>thumb_angle : <span class="xref-unresolved">OCADml</span>.V3.t;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Non-function parameters used for the construction of the plate.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.config" class="def record field anchored"><a href="#type-t.config" class="anchor"></a><code><span>config : <a href="#type-config">config</a>;</span></code></li><li id="type-t.scad" class="def record field anchored"><a href="#type-t.scad" class="anchor"></a><code><span>scad : <span class="xref-unresolved">OSCADml</span>.Scad.d3;</span></code></li><li id="type-t.body" class="def record field anchored"><a href="#type-t.body" class="anchor"></a><code><span>body : <a href="../Columns/index.html#type-t">Columns.t</a>;</span></code></li><li id="type-t.thumb" class="def record field anchored"><a href="#type-t.thumb" class="anchor"></a><code><span>thumb : <a href="../Columns/index.html#type-t">Columns.t</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The plate is constructed from a main body of <a href="../Columns/index.html#type-t"><code>Columns.t</code></a> and a thumb cluster, modelled as a separate <a href="../Column/index.html#type-t"><code>Column.t</code></a>. As with lower types, the config as well as the aggregate <code>Scad</code>.d3 are carried around for convenient access.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-translate"><a href="#val-translate" class="anchor"></a><code><span><span class="keyword">val</span> translate : <span><span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-xtrans"><a href="#val-xtrans" class="anchor"></a><code><span><span class="keyword">val</span> xtrans : <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ytrans"><a href="#val-ytrans" class="anchor"></a><code><span><span class="keyword">val</span> ytrans : <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ztrans"><a href="#val-ztrans" class="anchor"></a><code><span><span class="keyword">val</span> ztrans : <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rotate"><a href="#val-rotate" class="anchor"></a><code><span><span class="keyword">val</span> rotate : <span>?about:<span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-xrot"><a href="#val-xrot" class="anchor"></a><code><span><span class="keyword">val</span> xrot : <span>?about:<span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-yrot"><a href="#val-yrot" class="anchor"></a><code><span><span class="keyword">val</span> yrot : <span>?about:<span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-zrot"><a href="#val-zrot" class="anchor"></a><code><span><span class="keyword">val</span> zrot : <span>?about:<span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-axis_rotate"><a href="#val-axis_rotate" class="anchor"></a><code><span><span class="keyword">val</span> axis_rotate : <span>?about:<span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-quaternion"><a href="#val-quaternion" class="anchor"></a><code><span><span class="keyword">val</span> quaternion : <span>?about:<span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">OCADml</span>.Quaternion.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-scale"><a href="#val-scale" class="anchor"></a><code><span><span class="keyword">val</span> scale : <span><span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-xscale"><a href="#val-xscale" class="anchor"></a><code><span><span class="keyword">val</span> xscale : <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-yscale"><a href="#val-yscale" class="anchor"></a><code><span><span class="keyword">val</span> yscale : <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-zscale"><a href="#val-zscale" class="anchor"></a><code><span><span class="keyword">val</span> zscale : <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mirror"><a href="#val-mirror" class="anchor"></a><code><span><span class="keyword">val</span> mirror : <span><span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-affine"><a href="#val-affine" class="anchor"></a><code><span><span class="keyword">val</span> affine : <span><span class="xref-unresolved">OCADml</span>.Affine3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : 
  <span>?n_body_cols:int <span class="arrow">&#45;&gt;</span></span>
  <span>?centre_col:int <span class="arrow">&#45;&gt;</span></span>
  <span>?spacing:float <span class="arrow">&#45;&gt;</span></span>
  <span>?tent:float <span class="arrow">&#45;&gt;</span></span>
  <span>?n_thumb_cols:int <span class="arrow">&#45;&gt;</span></span>
  <span>?rotate_thumb_clips:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?thumb_offset:<span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span>
  <span>?thumb_angle:<span class="xref-unresolved">OCADml</span>.V3.t <span class="arrow">&#45;&gt;</span></span>
  <span>?body_lookups:<a href="Lookups/index.html#type-t">Lookups.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?thumb_lookups:<a href="Lookups/index.html#type-t">Lookups.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?caps:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">OSCADml</span>.Scad.d3)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?thumb_caps:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">OSCADml</span>.Scad.d3)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Key/index.html#type-t">Key.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make ?n_rows ?centre_row ?n_cols ?centre_col ?spacing ?tent
    ?rotate_thumb_clips ?thumb_offset ?thumb_angle ?body_lookups ?thumb_lookups
    ?caps ?thum_caps keyhole</code></p><p>Create a switch plate, with provided optional parameters and defaults. The default parameters may or may not be suitable as a jumping off point for your own design. To that end, other examples with divergent parameters are provided in the modules within the <code>models/examples</code> sub-directory of the <a href="https://github.com/geoffder/dometyl-keyboard/">dometyl repo</a>.</p><ul><li><code>n_body_cols</code> specifies number of columns on the main body of the switch plate</li><li><code>centre_col</code> specifies the column around which the others are positioned (typically 2, the middle finger) on the main body of the switch plate</li><li><code>spacing</code> gives the distance in mm between each column by default. Further adjustment can of course be done with <a href="Lookups/index.html#type-t.offset"><code>Lookups.t.offset</code></a>.</li><li><code>tent</code> angle in radians that the entire plate (including thumb) will be y-rotated</li><li><code>thumb_offset</code> directs the translation used for thumb cluster placement (starting point if zero origin).</li><li><code>thumb_angle</code> sets the euler (x -&gt; y -&gt; z) rotation used to orient the thumb before translating to its destination (rotation is about 0., oriented along x to start).</li><li><code>body_lookups</code> and <code>thumb_lookups</code> provide various per-column key/column-placement and orientation functions for the construction of the body and thumb respectively. See <a href="Lookups/index.html"><code>Lookups</code></a>.</li><li><code>caps</code> is a lookup from row number to a <code>Scad</code>.d3 representing a keycap. This will be used to provide caps to <a href="../Key/index.html#type-t"><code>Key.t</code></a>s before they are distributed in <a href="../Column/index.html#val-make"><code>Column.make</code></a>.</li><li><code>thumb_caps</code> same as <code>caps</code>, but for the thumb. If not provided, this default to <code>caps</code>.</li><li><code>keyhole</code> is the <a href="../Key/index.html#type-t"><code>Key.t</code></a> that will be distributed to make up the main plate and thumb cluster, carring all contained coordinate information and accesory <code>Scad</code>.d3s along with them to their new homes.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_joins"><a href="#val-column_joins" class="anchor"></a><code><span><span class="keyword">val</span> column_joins : 
  <span>?in_d:float <span class="arrow">&#45;&gt;</span></span>
  <span>?out_d1:float <span class="arrow">&#45;&gt;</span></span>
  <span>?out_d2:float <span class="arrow">&#45;&gt;</span></span>
  <span>?body_skip:<span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?body_join_skip:<span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?thumb_skip:<span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?thumb_join_skip:<span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">OSCADml</span>.Scad.d3</span></code></div><div class="spec-doc"><p><code>column_joins ?in_d ?out_d1 ?out_d2 t</code></p><p>Returns a <code>Scad</code>.d3 scad which joins together all columns of the main plate by hulling the <code>Key</code>.Face.scads of the <a href="../Key/index.html#type-t"><code>Key.t</code></a>s together, for a closed switch-plate look (and sturdiness). Typically, a function such as this or <a href="#val-skeleton_bridges"><code>skeleton_bridges</code></a> below will be used as as the <code>plate_welder</code> parameter to <a href="../Case/index.html#val-make"><code>Case.make</code></a>. Optional params <code>in_d</code>, <code>out_d1</code> and <code>out_d2</code> are passed on to <a href="../Bridge/index.html#val-cols"><code>Bridge.cols</code></a> to control how far the lower key's face is moved out, and the upper keys face is moved in before being hulled with its neighbours across the gap. This can be used to thicken the generated supports.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-skeleton_bridges"><a href="#val-skeleton_bridges" class="anchor"></a><code><span><span class="keyword">val</span> skeleton_bridges : 
  <span>?in_d:float <span class="arrow">&#45;&gt;</span></span>
  <span>?out_d1:float <span class="arrow">&#45;&gt;</span></span>
  <span>?out_d2:float <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">OSCADml</span>.Scad.d3</span></code></div><div class="spec-doc"><p><code>skeleton_bridges ?in_d ?out_d1 ?out_d2 t</code></p><p>Returns a <code>Scad</code>.d3 scad with &quot;bridges&quot; between the bottom row keys from index to middle, and the top keys for the remaining columns. Similar to the BastardKB skeletyl. This function, as well as <a href="#val-column_joins"><code>column_joins</code></a> make use of functions found in the <a href="../Bridge/index.html"><code>Bridge</code></a> module, if you are wanting to do something different, that would be a good place to get started. Optional params <code>in_d</code>, <code>out_d1</code> and <code>out_d2</code> are passed on to <a href="../Bridge/index.html#val-cols"><code>Bridge.cols</code></a> to control how far the lower key's face is moved out, and the upper keys face is moved in before being hulled with its neighbours across the gap. This can be used to thicken the generated supports.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_scad"><a href="#val-to_scad" class="anchor"></a><code><span><span class="keyword">val</span> to_scad : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">OSCADml</span>.Scad.d3</span></code></div><div class="spec-doc"><p><code>to_scad t</code></p><p>Extracts the <code>Scad</code>.d3 from <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-collect"><a href="#val-collect" class="anchor"></a><code><span><span class="keyword">val</span> collect : 
  <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../Key/index.html#type-t">Key.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">OSCADml</span>.Scad.d3 list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">OSCADml</span>.Scad.d3 list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">OSCADml</span>.Scad.d3</span></code></div><div class="spec-doc"><p><code>collect f t</code></p><p>Fold over all <a href="../Key/index.html#type-t"><code>Key.t</code></a>s contained within <code>t</code>, extracting <code>Scad</code>.d3s with <code>f</code>, and unioning them. Used for <a href="#val-collect_caps"><code>collect_caps</code></a> and <a href="#val-collect_cutouts"><code>collect_cutouts</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-collect_caps"><a href="#val-collect_caps" class="anchor"></a><code><span><span class="keyword">val</span> collect_caps : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">OSCADml</span>.Scad.d3</span></code></div><div class="spec-doc"><p><code>collect_caps t</code></p><p>Return a <code>Scad</code>.d3 representing the union between all caps carried by the <a href="../Key/index.html#type-t"><code>Key.t</code></a>s that make up the plate <code>t</code>. Used to design around keycap closeness, and lookout for collisions etc.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-collect_cutouts"><a href="#val-collect_cutouts" class="anchor"></a><code><span><span class="keyword">val</span> collect_cutouts : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">OSCADml</span>.Scad.d3</span></code></div><div class="spec-doc"><p><code>collect_cutout t</code></p><p>Return a <code>Scad</code>.d3 representing the union between all <a href="../Key/index.html#type-t.cutout"><code>Key.t.cutout</code></a>s found in the plate <code>t</code>. This is used by <a href="../Case/index.html#val-make"><code>Case.make</code></a> to perform the clearance cut from the <a href="../Case/index.html#type-t.scad"><code>Case.t.scad</code></a> model to make room for whatever the <a href="../Key/index.html#type-t.cutout"><code>Key.t.cutout</code></a> is modelling (e.g. hotswap sockets). Like <a href="#val-collect_caps"><code>collect_caps</code></a>, this could also be useful for visualization.</p></div></div></div></body></html>